<Window x:Class="DidoGest.UI.Windows.DocumentoEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Documento" Height="760" Width="980" WindowStartupLocation="CenterOwner">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" x:Name="Header" Text="Documento" FontSize="22" FontWeight="Bold" Margin="0,0,0,12"/>

        <ScrollViewer Grid.Row="1">
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBox Grid.Row="0" Grid.Column="0" x:Name="TxtTipo" Margin="0,0,10,10" IsReadOnly="True"
                             materialDesign:HintAssist.Hint="Tipo" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    <TextBox Grid.Row="0" Grid.Column="1" x:Name="TxtNumero" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="Numero" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,10">
                        <DatePicker x:Name="DpData" Width="200" Margin="0,0,0,8"/>
                        <ComboBox x:Name="CmbMagazzino"
                                  materialDesign:HintAssist.Hint="Magazzino"
                                  Style="{StaticResource MaterialDesignOutlinedComboBox}"/>
                    </StackPanel>
                    <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,0,10">
                        <ComboBox x:Name="CmbCliente" Margin="0,0,0,8"
                                  materialDesign:HintAssist.Hint="Cliente" Style="{StaticResource MaterialDesignOutlinedComboBox}"/>
                        <ComboBox x:Name="CmbFornitore"
                                  materialDesign:HintAssist.Hint="Fornitore" Style="{StaticResource MaterialDesignOutlinedComboBox}"/>
                    </StackPanel>

                    <TextBox Grid.Row="2" Grid.Column="0" x:Name="TxtImponibile" Margin="0,0,10,10"
                             materialDesign:HintAssist.Hint="Imponibile" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    <TextBox Grid.Row="2" Grid.Column="1" x:Name="TxtIva" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="IVA" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <TextBox Grid.Row="3" Grid.Column="0" x:Name="TxtTotale" Margin="0,0,10,10"
                             materialDesign:HintAssist.Hint="Totale" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    <TextBox Grid.Row="3" Grid.Column="1" x:Name="TxtSconto" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="Sconto globale" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <TextBox Grid.Row="4" Grid.Column="0" x:Name="TxtSpese" Margin="0,0,10,10"
                             materialDesign:HintAssist.Hint="Spese accessorie" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    <TextBox Grid.Row="4" Grid.Column="1" x:Name="TxtPagamento" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="Modalità pagamento" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <DatePicker Grid.Row="5" Grid.Column="0" x:Name="DpScadenza" Width="200" Margin="0,0,10,10"/>
                    <TextBox Grid.Row="5" Grid.Column="1" x:Name="TxtBanca" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="Banca appoggio" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <WrapPanel Grid.Row="6" Grid.ColumnSpan="2" Margin="0,0,0,10">
                        <CheckBox x:Name="ChkPagato" Content="Pagato" Margin="0,0,20,0"
                                  Checked="ChkPagato_Checked" Unchecked="ChkPagato_Unchecked"/>
                        <DatePicker x:Name="DpDataPagamento" Width="200" Margin="0,0,20,0"
                                    materialDesign:HintAssist.Hint="Data pagamento"
                                    SelectedDateChanged="DpDataPagamento_SelectedDateChanged"/>
                        <CheckBox x:Name="ChkFE" Content="Fattura elettronica" Margin="0,0,20,0"/>
                    </WrapPanel>

                    <TextBox Grid.Row="7" Grid.Column="0" x:Name="TxtCodiceSDI" Margin="0,0,10,10"
                             materialDesign:HintAssist.Hint="Codice SDI" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    <TextBox Grid.Row="7" Grid.Column="1" x:Name="TxtPEC" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="PEC destinatario" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <TextBox Grid.Row="8" Grid.Column="0" x:Name="TxtCausale" Margin="0,0,10,10"
                             materialDesign:HintAssist.Hint="Causale" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    <TextBox Grid.Row="8" Grid.Column="1" x:Name="TxtAspetto" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="Aspetto beni" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <TextBox Grid.Row="9" Grid.Column="0" x:Name="TxtTrasporto" Margin="0,0,10,10"
                             materialDesign:HintAssist.Hint="Trasporto a cura" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    <TextBox Grid.Row="9" Grid.Column="1" x:Name="TxtVettore" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="Vettore" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

                    <TextBox Grid.Row="10" Grid.ColumnSpan="2" x:Name="TxtNote" Height="120" TextWrapping="Wrap" AcceptsReturn="True" Margin="0,0,0,10"
                             materialDesign:HintAssist.Hint="Note" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                </Grid>

                <Grid Margin="0,10,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <WrapPanel Grid.Row="0" Margin="0,0,0,8">
                        <Button Content="Aggiungi riga" Click="BtnAggiungiRiga_Click" Margin="0,0,10,0" Style="{StaticResource MaterialDesignRaisedButton}"/>
                        <Button Content="Rimuovi riga" Click="BtnRimuoviRiga_Click" Style="{StaticResource MaterialDesignOutlinedButton}"/>
                    </WrapPanel>

                    <DataGrid Grid.Row="1" x:Name="RigheDataGrid" AutoGenerateColumns="False" CanUserAddRows="False" MinHeight="220">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="#" Binding="{Binding NumeroRiga}" Width="50" IsReadOnly="True"/>

                            <DataGridTemplateColumn Header="Articolo" Width="160">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding ArticoloCodice}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=ArticoliForCombo}"
                                                  SelectedValuePath="Id"
                                                  DisplayMemberPath="Codice"
                                                  SelectedValue="{Binding ArticoloId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn Header="Descrizione" Binding="{Binding Descrizione, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                            <DataGridTextColumn Header="Q.tà" Binding="{Binding Quantita, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="80"/>
                            <DataGridTextColumn Header="Prezzo" Binding="{Binding PrezzoUnitario, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="90"/>
                            <DataGridTextColumn Header="IVA%" Binding="{Binding AliquotaIVA, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="70"/>
                            <DataGridTextColumn Header="Totale" Binding="{Binding Totale}" Width="90" IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Stampa / PDF" Margin="0,0,10,0" Click="BtnStampa_Click" Style="{StaticResource MaterialDesignRaisedButton}"/>
            <Button Content="Annulla" Margin="0,0,10,0" Click="BtnAnnulla_Click" Style="{StaticResource MaterialDesignRaisedButton}"/>
            <Button Content="Salva" Click="BtnSalva_Click" Style="{StaticResource MaterialDesignRaisedButton}"/>
        </StackPanel>
    </Grid>
</Window>
