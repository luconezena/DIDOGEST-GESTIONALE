<Window x:Class="DidoGest.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        Title="DIDO-GEST - Gestionale Professionale" 
        Height="800" Width="1400"
        WindowState="Maximized"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Barra del menu -->
        <Menu Grid.Row="0" Background="{DynamicResource PrimaryHueMidBrush}" Foreground="White" Height="30">
            <!--
            Fix: i MenuItem nel dropdown ereditavano Foreground=White dal Menu,
            risultando "vuoti" su background bianco.
            -->
            <Menu.ItemContainerStyle>
                <Style TargetType="MenuItem">
                    <Setter Property="Foreground" Value="Black" />
                    <Setter Property="Background" Value="{DynamicResource MaterialDesignPaper}" />
                    <Setter Property="ItemContainerStyle">
                        <Setter.Value>
                            <Style TargetType="MenuItem">
                                <Setter Property="Foreground" Value="Black" />
                                <Setter Property="Background" Value="{DynamicResource MaterialDesignPaper}" />
                            </Style>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <Trigger Property="Role" Value="TopLevelHeader">
                            <Setter Property="Foreground" Value="White" />
                            <Setter Property="Background" Value="Transparent" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Menu.ItemContainerStyle>
            <MenuItem Header="ðŸ“ File">
                <MenuItem Header="Esci" Click="MenuEsci_Click" />
            </MenuItem>
            
            <MenuItem Header="ðŸ‘¥ ANAGRAFICHE">
                <MenuItem Header="Clienti" Click="MenuAnagraficheClienti_Click" />
                <MenuItem Header="Fornitori" Click="MenuAnagraficheFornitori_Click" />
                <MenuItem Header="Agenti" Click="MenuAnagraficheAgenti_Click" />
            </MenuItem>
            
            <MenuItem Header="ðŸ“¦ MAGAZZINO">
                <MenuItem Header="Articoli" Click="MenuMagazzinoArticoli_Click" />
                <MenuItem Header="Giacenze" Click="MenuMagazzinoGiacenze_Click" />
                <MenuItem Header="Sottoscorta / Da riordinare" Click="MenuMagazzinoSottoscorta_Click" />
                <MenuItem Header="Movimenti" Click="MenuMagazzinoMovimenti_Click" />
                <MenuItem Header="Listini Prezzi" Click="MenuMagazzinoListini_Click" />
            </MenuItem>
            
            <MenuItem Header="ðŸ“„ DOCUMENTI">
                <MenuItem Header="DDT" Click="MenuDocumentiDDT_Click" />
                <MenuItem Header="Fatture" Click="MenuDocumentiFatture_Click" />
                <MenuItem Header="Nuova Fattura Accompagnatoria" Click="MenuDocumentiFatturaAccompagnatoria_Click" />
                <MenuItem Header="Preventivi" Click="MenuDocumentiPreventivi_Click" />
                <MenuItem Header="Ordini" Click="MenuDocumentiOrdini_Click" />
            </MenuItem>
            
            <MenuItem x:Name="MenuFatturazioneElettronicaRoot" Header="âš¡ FATTURAZIONE ELETTRONICA">
                <MenuItem x:Name="MenuFattureElettroniche" Header="Fatture Elettroniche" Click="MenuFatturazioneElettronica_Click" />
            </MenuItem>
            
            <MenuItem Header="ðŸ’° CONTABILITÃ€">
                <MenuItem Header="Prima Nota" Click="MenuContabilitaPrimaNota_Click" />
                <MenuItem Header="Registri IVA" Click="MenuContabilitaRegistriIVA_Click" />
                <MenuItem Header="Mastrini" Click="MenuContabilitaMastrini_Click" />
                <Separator />
                <MenuItem Header="Scadenzario incassi" Click="MenuContabilitaScadenzarioIncassi_Click" />
            </MenuItem>
            
            <MenuItem Header="ðŸ”§ ASSISTENZE">
                <MenuItem Header="Schede Assistenza" Click="MenuAssistenzeSchede_Click" />
                <MenuItem Header="Contratti" Click="MenuAssistenzeContratti_Click" />
                <MenuItem Header="Cantieri" Click="MenuAssistenzeCantieri_Click" />
            </MenuItem>
            
            <MenuItem Header="ðŸ“‚ ARCHIVIO">
                <MenuItem Header="Archiviazione Documentale" Click="MenuArchivio_Click" />
            </MenuItem>
            
            <MenuItem Header="âš™ï¸ UTILITY">
                <MenuItem Header="Impostazioni" Click="MenuUtilityImpostazioni_Click" />
                <MenuItem Header="Gestione utenti" Click="MenuUtilityGestioneUtenti_Click" />
                <MenuItem Header="Backup Database" Click="MenuUtilityBackup_Click" />
                <MenuItem Header="Pulisci dati DEMO" Click="MenuUtilityPulisciDemo_Click" />
                <MenuItem Header="Imposta logo stampa..." Click="MenuUtilityImpostaLogoStampa_Click" />
                <MenuItem Header="Rimuovi logo stampa" Click="MenuUtilityRimuoviLogoStampa_Click" />
                <Separator />
                <MenuItem Header="Info" Click="MenuUtilityInfo_Click" />
            </MenuItem>

            <MenuItem Header="â“ AIUTO">
                <MenuItem Header="Guida del programma" Click="MenuAiutoGuida_Click" />
            </MenuItem>
        </Menu>

        <!-- Area di contenuto principale -->
        <Border Grid.Row="1" Background="White" Margin="10" CornerRadius="5">
            <ContentControl x:Name="ContentArea" />
        </Border>

        <!-- Barra di stato -->
        <StatusBar Grid.Row="2" Background="{DynamicResource PrimaryHueMidBrush}" Foreground="White" Height="25">
            <StatusBarItem>
                <TextBlock Text="DIDO-GEST v1.0" />
            </StatusBarItem>
            <Separator />
            <StatusBarItem>
                <TextBlock x:Name="StatusMessage" Text="Pronto" />
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock x:Name="StatusDateTime" />
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
